<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nexus Social | Global Node</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;700&family=Outfit:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #02040a;
            --aura-indigo: #6366f1;
            --aura-cyan: #06b6d4;
            --glass-border: rgba(255, 255, 255, 0.1);
        }
        body {
            font-family: 'Lexend', sans-serif;
            background-color: var(--bg-deep);
            color: #f1f5f9;
            margin: 0;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 0% 0%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(6, 182, 212, 0.08) 0%, transparent 50%);
            background-attachment: fixed;
        }
        .font-display { font-family: 'Outfit', sans-serif; }
        .glass-aura {
            background: rgba(15, 23, 42, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
        }
        .refract-border {
            box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.05), 0 10px 30px rgba(0,0,0,0.5);
        }
        .hide { display: none !important; }
        .active-tab { color: var(--aura-cyan); }
        
        /* Message Bubbles */
        .msg-me { background: white; color: black; border-radius: 20px 20px 0 20px; }
        .msg-them { background: rgba(255,255,255,0.05); color: white; border-radius: 20px 20px 20px 0; border: 1px solid rgba(255,255,255,0.1); }
        
        input, textarea { background: rgba(255,255,255,0.03) !important; border: 1px solid rgba(255,255,255,0.1) !important; color: white !important; }
        input:focus { border-color: var(--aura-cyan) !important; outline: none; }

        @keyframes pulse-cyan { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
        .animate-pulse-cyan { animation: pulse-cyan 2s infinite; }
        
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
    </style>
</head>
<body>

    <!-- AUTHENTICATION LAYER -->
    <div id="view-auth" class="min-h-screen flex items-center justify-center p-6 transition-all duration-500">
        <div class="glass-aura w-full max-w-md rounded-[3rem] p-10 refract-border">
            <div class="text-center mb-10">
                <div class="w-16 h-16 bg-white rounded-2xl flex items-center justify-center text-black font-black text-2xl mx-auto mb-6 rotate-6 shadow-2xl shadow-white/10">NX</div>
                <h1 class="text-4xl font-display font-black uppercase tracking-tighter">Nexus Social</h1>
                <p id="auth-status-text" class="text-[9px] font-black uppercase tracking-[0.4em] text-slate-500 mt-3">Activate Neural Link</p>
            </div>
            <form id="form-auth" class="space-y-4">
                <div id="signup-fields" class="hide space-y-4">
                    <input type="text" id="auth-displayname" placeholder="Entity Name" class="w-full px-6 py-4 rounded-2xl text-sm">
                </div>
                <input type="email" id="auth-email" placeholder="Neural Email" class="w-full px-6 py-4 rounded-2xl text-sm" required>
                <input type="password" id="auth-password" placeholder="Key Phrase" class="w-full px-6 py-4 rounded-2xl text-sm" required>
                <button type="submit" class="w-full bg-white text-black font-black py-5 rounded-2xl text-[10px] uppercase tracking-[0.4em] hover:scale-[1.02] active:scale-95 transition-all shadow-xl shadow-white/5 mt-4">Initialize Sync</button>
            </form>
            <p class="mt-10 text-center text-[9px] font-black uppercase text-slate-500 tracking-widest">
                <span id="auth-toggle-msg">Unregistered?</span>
                <button id="btn-auth-toggle" class="text-cyan-400 ml-2 hover:underline">Forge Node</button>
            </p>
        </div>
    </div>

    <!-- MAIN APPLICATION LAYER -->
    <div id="view-app" class="hide min-h-screen flex flex-col">
        
        <!-- HEADER -->
        <header class="fixed top-0 left-0 right-0 z-50 glass-aura px-8 py-5 flex items-center justify-between border-b border-white/5">
            <div class="flex items-center gap-4">
                <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center text-black font-black text-xs">NX</div>
                <h2 id="app-view-title" class="text-lg font-display font-black uppercase tracking-tighter">Resonance</h2>
            </div>
            <div class="flex items-center gap-4">
                <div id="user-status-dot" class="w-2 h-2 rounded-full bg-cyan-400 shadow-[0_0_10px_cyan] animate-pulse"></div>
                <div id="header-avatar" class="w-10 h-10 rounded-xl bg-slate-800 bg-cover bg-center ring-1 ring-white/10 cursor-pointer"></div>
            </div>
        </header>

        <!-- VIEW CONTAINERS -->
        <main class="flex-1 pt-24 pb-28 px-4 max-w-2xl mx-auto w-full">
            
            <!-- FEED VIEW -->
            <div id="subview-feed" class="space-y-8 animate-in fade-in slide-in-from-bottom-4">
                <div class="glass-aura rounded-[2.5rem] p-6 refract-border">
                    <textarea id="input-post" placeholder="Broadcast to Nexus..." class="w-full h-24 resize-none bg-transparent border-none focus:outline-none text-white text-sm font-medium placeholder:text-slate-600 mb-4"></textarea>
                    <div class="flex justify-between items-center border-t border-white/5 pt-4">
                        <button class="text-slate-500 hover:text-white transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" stroke-width="2"/></svg></button>
                        <button id="btn-post" class="bg-white text-black text-[9px] font-black uppercase tracking-[0.3em] px-8 py-3 rounded-full hover:scale-105 transition-all">Emit</button>
                    </div>
                </div>
                <div id="feed-container" class="space-y-10"></div>
            </div>

            <!-- CHAT LIST VIEW -->
            <div id="subview-chats" class="hide space-y-6 animate-in fade-in slide-in-from-bottom-4">
                <h3 class="text-[10px] font-black uppercase tracking-[0.5em] text-cyan-400 mb-8 px-2">Neural Frequencies</h3>
                <div id="chat-list-container" class="space-y-3"></div>
            </div>

            <!-- PROFILE VIEW -->
            <div id="subview-profile" class="hide space-y-10 animate-in fade-in slide-in-from-bottom-4">
                <div class="text-center">
                    <div class="relative inline-block group">
                        <div id="profile-avatar-large" class="w-32 h-32 rounded-[3rem] bg-slate-800 mx-auto mb-6 bg-cover bg-center ring-4 ring-white/5 shadow-2xl relative overflow-hidden">
                            <div id="avatar-loading" class="hide absolute inset-0 bg-black/60 flex items-center justify-center"><div class="w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"></div></div>
                        </div>
                        <input type="file" id="input-avatar" class="hide" accept="image/*">
                        <button onclick="document.getElementById('input-avatar').click()" class="absolute -bottom-2 -right-2 w-10 h-10 bg-white text-black rounded-xl flex items-center justify-center shadow-xl hover:scale-110 transition-all"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" stroke-width="2"/><path d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" stroke-width="2"/></svg></button>
                    </div>
                    <h3 id="profile-name" class="text-3xl font-display font-black text-white uppercase tracking-tight">Entity Node</h3>
                    <p id="profile-handle" class="text-[10px] font-black uppercase tracking-[0.4em] text-cyan-400 mt-2">@identifier</p>
                </div>
                <div class="space-y-6 pt-10 border-t border-white/5">
                    <div class="space-y-2">
                        <label class="text-[8px] font-black uppercase text-slate-500 ml-4">Node Bio</label>
                        <textarea id="profile-bio-input" class="w-full h-32 rounded-3xl p-6 text-sm resize-none" placeholder="Update your neural signature..."></textarea>
                    </div>
                    <button id="btn-save-profile" class="w-full bg-cyan-500 text-white py-5 rounded-2xl text-[10px] font-black uppercase tracking-[0.4em] shadow-lg shadow-cyan-900/20">Sync Identity</button>
                    <button id="btn-logout" class="w-full py-5 text-[10px] font-black uppercase text-rose-500/60 hover:text-rose-500 transition-colors">Sever Neural Link</button>
                </div>
            </div>
        </main>

        <!-- CHAT OVERLAY (ACTIVE ROOM) -->
        <div id="chat-room-overlay" class="hide fixed inset-0 z-[100] bg-[#02040a] flex flex-col animate-in slide-in-from-right duration-300">
            <header class="p-6 border-b border-white/5 flex items-center gap-6 glass-aura">
                <button id="btn-close-chat" class="w-10 h-10 rounded-xl flex items-center justify-center text-slate-400 hover:bg-white/5 transition-all"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M15 19l-7-7 7-7" stroke-width="2.5"/></svg></button>
                <div class="flex items-center gap-4">
                    <div id="chat-room-avatar" class="w-10 h-10 rounded-xl bg-cover bg-center"></div>
                    <div>
                        <h4 id="chat-room-name" class="font-display font-black text-white uppercase text-sm tracking-tight">System Node</h4>
                        <p class="text-[8px] font-black uppercase text-cyan-400 tracking-widest">Active Pulse</p>
                    </div>
                </div>
            </header>
            <div id="chat-messages" class="flex-1 overflow-y-auto p-8 space-y-6 custom-scrollbar flex flex-col"></div>
            <div class="p-6 border-t border-white/5 glass-aura pb-10">
                <form id="form-chat" class="flex gap-4">
                    <input type="text" id="input-msg" placeholder="Emit signal..." class="flex-1 px-6 py-4 rounded-2xl text-sm">
                    <button type="submit" class="w-14 h-14 bg-white text-black rounded-2xl flex items-center justify-center shadow-lg"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"/></svg></button>
                </form>
            </div>
        </div>

        <!-- NAVIGATION -->
        <nav class="fixed bottom-0 left-0 right-0 glass-aura border-t border-white/5 px-10 py-4 flex justify-between items-center z-[60] rounded-t-[2.5rem]">
            <button class="nav-btn active-tab" data-target="feed"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" stroke-width="2"/></svg></button>
            <button class="nav-btn" data-target="chats"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" stroke-width="2"/></svg></button>
            <button class="nav-btn" data-target="profile"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" stroke-width="2"/></svg></button>
        </nav>
    </div>

    <!-- CORE SCRIPT -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
        import { getFirestore, collection, doc, setDoc, updateDoc, getDoc, addDoc, query, orderBy, onSnapshot, serverTimestamp, where } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD8pCEwiDHWvb4vju9vtsXvxFvB29SM6VM",
            authDomain: "nexus-social-dce76.firebaseapp.com",
            projectId: "nexus-social-dce76",
            storageBucket: "nexus-social-dce76.firebasestorage.app",
            messagingSenderId: "172694934932",
            appId: "1:172694934932:web:62bb46749dd0c062bfab81"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);

        let currentUser = null;
        let activeRoomId = null;

        // UI HELPERS
        const showView = (viewId) => {
            ['feed', 'chats', 'profile'].forEach(id => document.getElementById(`subview-${id}`).classList.add('hide'));
            document.getElementById(`subview-${viewId}`).classList.remove('hide');
            document.querySelectorAll('.nav-btn').forEach(btn => btn.dataset.target === viewId ? btn.classList.add('active-tab') : btn.classList.remove('active-tab'));
            document.getElementById('app-view-title').innerText = viewId.charAt(0).toUpperCase() + viewId.slice(1);
        };

        // AUTH LOGIC
        document.getElementById('btn-auth-toggle').onclick = (e) => {
            const isLogin = document.getElementById('signup-fields').classList.toggle('hide');
            document.getElementById('auth-status-text').innerText = isLogin ? "Activate Neural Link" : "Forge New Identity";
            document.getElementById('btn-auth-toggle').innerText = isLogin ? "Forge Node" : "Login";
            document.getElementById('auth-toggle-msg').innerText = isLogin ? "Unregistered?" : "Existing Node?";
        };

        document.getElementById('form-auth').onsubmit = async (e) => {
            e.preventDefault();
            const email = document.getElementById('auth-email').value;
            const pass = document.getElementById('auth-password').value;
            const isSignup = !document.getElementById('signup-fields').classList.contains('hide');

            try {
                if (isSignup) {
                    const name = document.getElementById('auth-displayname').value || "Entity";
                    const cred = await createUserWithEmailAndPassword(auth, email, pass);
                    await setDoc(doc(db, "users", cred.user.uid), {
                        id: cred.user.uid,
                        username: name.toLowerCase().replace(/\s/g, '_'),
                        displayName: name,
                        email: email,
                        avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${cred.user.uid}`,
                        bio: "Initialized into Nexus.",
                        createdAt: serverTimestamp()
                    });
                } else {
                    await signInWithEmailAndPassword(auth, email, pass);
                }
            } catch (err) { alert(err.message); }
        };

        document.getElementById('btn-logout').onclick = () => signOut(auth);

        // APP LOGIC
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                currentUser = user;
                document.getElementById('view-auth').classList.add('hide');
                document.getElementById('view-app').classList.remove('hide');
                
                // Sync User Data
                onSnapshot(doc(db, "users", user.uid), (snap) => {
                    const data = snap.data();
                    if (!data) return;
                    document.getElementById('header-avatar').style.backgroundImage = `url(${data.avatar})`;
                    document.getElementById('profile-avatar-large').style.backgroundImage = `url(${data.avatar})`;
                    document.getElementById('profile-name').innerText = data.displayName;
                    document.getElementById('profile-handle').innerText = `@${data.username}`;
                    document.getElementById('profile-bio-input').value = data.bio;
                });

                initFeed();
                initChatList();
            } else {
                document.getElementById('view-app').classList.add('hide');
                document.getElementById('view-auth').classList.remove('hide');
            }
        });

        // FEED LOGIC
        function initFeed() {
            const q = query(collection(db, "posts"), orderBy("createdAt", "desc"));
            onSnapshot(q, (snap) => {
                const container = document.getElementById('feed-container');
                container.innerHTML = "";
                snap.forEach(d => {
                    const post = d.data();
                    const card = document.createElement('div');
                    card.className = "glass-aura p-8 rounded-[3rem] refract-border space-y-6";
                    card.innerHTML = `
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-2xl bg-cover bg-center ring-1 ring-white/10" style="background-image:url(${post.authorAvatar})"></div>
                            <div>
                                <h4 class="font-display font-black text-white uppercase text-sm">${post.authorName}</h4>
                                <p class="text-[8px] font-black text-slate-500 uppercase tracking-widest">Broadcast Node</p>
                            </div>
                        </div>
                        <p class="text-lg font-light text-slate-200 leading-relaxed">${post.content}</p>
                        <div class="flex gap-6 border-t border-white/5 pt-4 text-slate-500">
                             <button class="flex items-center gap-2 hover:text-rose-500 transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" stroke-width="2"/></svg><span class="text-[10px] font-black">${post.likesCount || 0}</span></button>
                             <button class="flex items-center gap-2 hover:text-cyan-400 transition-colors" onclick="window.startDirectChat('${post.userId}', '${post.authorName}', '${post.authorAvatar}')"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" stroke-width="2"/></svg><span class="text-[10px] font-black">Sync</span></button>
                        </div>
                    `;
                    container.appendChild(card);
                });
            });
        }

        document.getElementById('btn-post').onclick = async () => {
            const content = document.getElementById('input-post').value;
            if (!content.trim()) return;
            const userSnap = await getDoc(doc(db, "users", currentUser.uid));
            const u = userSnap.data();
            await addDoc(collection(db, "posts"), {
                userId: currentUser.uid,
                authorName: u.displayName,
                authorAvatar: u.avatar,
                content: content,
                createdAt: serverTimestamp(),
                likesCount: 0
            });
            document.getElementById('input-post').value = "";
        };

        // CHAT LOGIC
        function initChatList() {
            const q = query(collection(db, "chats"), where("participants", "array-contains", currentUser.uid), orderBy("lastUpdated", "desc"));
            onSnapshot(q, (snap) => {
                const container = document.getElementById('chat-list-container');
                container.innerHTML = "";
                snap.forEach(d => {
                    const chat = d.data();
                    const otherIdx = chat.participants[0] === currentUser.uid ? 1 : 0;
                    const card = document.createElement('div');
                    card.className = "p-5 glass-aura rounded-[2rem] flex items-center gap-5 cursor-pointer hover:bg-white/5 transition-all";
                    card.onclick = () => openChatRoom(d.id, chat.participantNames[otherIdx], chat.participantAvatars[otherIdx]);
                    card.innerHTML = `
                        <div class="w-14 h-14 rounded-2xl bg-cover bg-center shadow-xl" style="background-image:url(${chat.participantAvatars[otherIdx]})"></div>
                        <div class="flex-1 overflow-hidden">
                            <h4 class="font-display font-black text-white uppercase text-sm truncate">${chat.participantNames[otherIdx]}</h4>
                            <p class="text-[9px] font-black text-slate-500 uppercase truncate mt-1">${chat.lastMessage || 'Channel Established'}</p>
                        </div>
                    `;
                    container.appendChild(card);
                });
            });
        }

        window.startDirectChat = async (targetUid, targetName, targetAvatar) => {
            if (targetUid === currentUser.uid) return;
            const chatId = [currentUser.uid, targetUid].sort().join('_');
            const chatRef = doc(db, "chats", chatId);
            const snap = await getDoc(chatRef);
            
            if (!snap.exists()) {
                const mySnap = await getDoc(doc(db, "users", currentUser.uid));
                const me = mySnap.data();
                await setDoc(chatRef, {
                    participants: [currentUser.uid, targetUid].sort(),
                    participantNames: currentUser.uid < targetUid ? [me.displayName, targetName] : [targetName, me.displayName],
                    participantAvatars: currentUser.uid < targetUid ? [me.avatar, targetAvatar] : [targetAvatar, me.avatar],
                    lastUpdated: serverTimestamp(),
                    lastMessage: ""
                });
            }
            openChatRoom(chatId, targetName, targetAvatar);
        };

        function openChatRoom(id, name, avatar) {
            activeRoomId = id;
            document.getElementById('chat-room-overlay').classList.remove('hide');
            document.getElementById('chat-room-name').innerText = name;
            document.getElementById('chat-room-avatar').style.backgroundImage = `url(${avatar})`;
            
            const q = query(collection(db, "chats", id, "messages"), orderBy("timestamp", "asc"));
            onSnapshot(q, (snap) => {
                const container = document.getElementById('chat-messages');
                container.innerHTML = "";
                snap.forEach(d => {
                    const msg = d.data();
                    const isMe = msg.senderId === currentUser.uid;
                    const el = document.createElement('div');
                    el.className = `max-w-[80%] px-5 py-3 text-sm font-medium ${isMe ? 'msg-me self-end' : 'msg-them self-start'}`;
                    el.innerText = msg.content;
                    container.appendChild(el);
                });
                container.scrollTop = container.scrollHeight;
            });
        }

        document.getElementById('btn-close-chat').onclick = () => {
            document.getElementById('chat-room-overlay').classList.add('hide');
            activeRoomId = null;
        };

        document.getElementById('form-chat').onsubmit = async (e) => {
            e.preventDefault();
            const val = document.getElementById('input-msg').value;
            if (!val.trim() || !activeRoomId) return;
            
            await addDoc(collection(db, "chats", activeRoomId, "messages"), {
                senderId: currentUser.uid,
                content: val,
                timestamp: serverTimestamp()
            });
            await updateDoc(doc(db, "chats", activeRoomId), {
                lastMessage: val,
                lastUpdated: serverTimestamp()
            });
            document.getElementById('input-msg').value = "";
        };

        // PROFILE LOGIC
        document.getElementById('input-avatar').onchange = async (e) => {
            const file = e.target.files[0];
            if (!file) return;
            document.getElementById('avatar-loading').classList.remove('hide');
            try {
                const sRef = ref(storage, `avatars/${currentUser.uid}`);
                await uploadBytes(sRef, file);
                const url = await getDownloadURL(sRef);
                await updateDoc(doc(db, "users", currentUser.uid), { avatar: url });
            } catch (err) { alert(err.message); }
            document.getElementById('avatar-loading').classList.add('hide');
        };

        document.getElementById('btn-save-profile').onclick = async () => {
            const bio = document.getElementById('profile-bio-input').value;
            await updateDoc(doc(db, "users", currentUser.uid), { bio });
            alert("Neural signature updated.");
        };

        // NAVIGATION SWITCHER
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.onclick = () => showView(btn.dataset.target);
        });

    </script>
</body>
</html>
